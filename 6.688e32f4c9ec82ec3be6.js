(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WuFp:function(t,e,i){"use strict";i.r(e),i.d(e,"PostModule",function(){return $});var s=i("ofXK"),o=i("3Pt+"),r=i("tyNb"),n=i("9jGm"),c=i("l7P3");const b=Object(c.o)("[POST ADD PAGE] Add_Post",Object(c.u)()),d=Object(c.o)("[POST ADD PAGE] Add_Post_Success",Object(c.u)()),a=Object(c.o)("[POST EDIT PAGE ] Edit_Post",Object(c.u)()),l=Object(c.o)("[POST EDIT PAGE ] Edit_Post_Success",Object(c.u)()),p=Object(c.o)("[POST LIST PAGE] Delete_Post",Object(c.u)()),u=Object(c.o)("[POST LIST PAGE] Delete_Post_Success"),h=Object(c.o)("[POST PAGE] Get_posts"),m=Object(c.o)("[POST PAGE] Get_posts_Success",Object(c.u)());var P=i("fXoL");const f=function(){return["/post"]};let O=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.addPostForm=new o.d({title:new o.b(null,[o.l.required,o.l.minLength(5)]),description:new o.b(null,[o.l.required,o.l.minLength(10)])})}onSubmit(){this.addPostForm.valid?this.store.dispatch(b({post:{title:this.addPostForm.value.title,description:this.addPostForm.value.description}})):this.addPostForm.markAllAsTouched()}getValidationError(t){const e=this.addPostForm.get(t);if(e.touched&&e.invalid&&e.errors){if(e.errors.required)return`${t} is required`;if(e.errors.minlength)return"Should have a minimum length of "+("title"===t?"5":"10")}return null}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(c.i))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-add"]],decls:21,vars:5,consts:[[1,"d-flex","justify-content-between"],[1,"text-dark",3,"routerLink"],[3,"formGroup","ngSubmit"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title","id","title",1,"form-control"],[1,"text-danger"],["for","description",1,"form-label"],["type","text","name","description","formControlName","description","id","description",1,"form-control"],["type","submit",1,"btn","btn-primary","my-4"]],template:function(t,e){1&t&&(P.Qb(0,"h1",0),P.Qb(1,"span"),P.kc(2,"Add Post"),P.Pb(),P.Qb(3,"a",1),P.kc(4,"close"),P.Pb(),P.Pb(),P.Mb(5,"hr"),P.Qb(6,"form",2),P.Xb("ngSubmit",function(){return e.onSubmit()}),P.Qb(7,"div"),P.Qb(8,"label",3),P.kc(9,"Title"),P.Pb(),P.Mb(10,"input",4),P.Qb(11,"small",5),P.kc(12),P.Pb(),P.Pb(),P.Qb(13,"div"),P.Qb(14,"label",6),P.kc(15,"Description"),P.Pb(),P.Mb(16,"input",7),P.Qb(17,"small",5),P.kc(18),P.Pb(),P.Pb(),P.Qb(19,"button",8),P.kc(20,"Post"),P.Pb(),P.Pb()),2&t&&(P.Bb(3),P.cc("routerLink",P.dc(4,f)),P.Bb(3),P.cc("formGroup",e.addPostForm),P.Bb(6),P.lc(e.getValidationError("title")),P.Bb(6),P.lc(e.getValidationError("description")))},directives:[r.h,o.m,o.h,o.e,o.a,o.g,o.c],styles:[""]}),t})();const g=Object(c.p)("posts"),j=Object(c.r)(g,t=>t.posts),k=Object(c.r)(g,(t,e)=>t.posts.find(t=>t.id===e.postId)),v=function(){return["/post"]};let Q=(()=>{class t{constructor(t,e,i){this.activatedroute=t,this.store=e,this.router=i}ngOnInit(){this.activatedroute.params.subscribe(t=>{this.postSubscription=this.store.select(k,{postId:t.id}).subscribe(t=>{t&&(this.post=t),this.editForm=new o.d({title:new o.b(null==t?void 0:t.title,[o.l.required,o.l.minLength(5)]),description:new o.b(null==t?void 0:t.description,[o.l.required,o.l.minLength(10)])})})})}onEdit(){this.editForm.valid?(this.store.dispatch(a({post:{title:this.editForm.value.title,description:this.editForm.value.description,id:this.post.id}})),this.router.navigateByUrl("/post")):this.editForm.markAllAsTouched()}getValidationError(t){const e=this.editForm.get(t);if(e.touched&&e.invalid&&e.errors){if(e.errors.required)return`${t} is required`;if(e.errors.minlength)return"Should have a minimum length of "+("title"===t?"5":"10")}return null}ngOnDestroy(){this.postSubscription&&this.postSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(r.a),P.Lb(c.i),P.Lb(r.f))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-edit"]],decls:21,vars:5,consts:[[1,"d-flex","justify-content-between"],[1,"text-dark",3,"routerLink"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","",1,"form-label"],["type","text","name","title","formControlName","title","id","title",1,"form-control"],[1,"text-danger"],["for","description",1,"form-label"],["type","text","name","description","formControlName","description","id","description",1,"form-control"],[1,"btn","btn-primary","my-4"]],template:function(t,e){1&t&&(P.Qb(0,"h1",0),P.Qb(1,"span"),P.kc(2,"Update Post"),P.Pb(),P.Qb(3,"a",1),P.kc(4,"close"),P.Pb(),P.Pb(),P.Mb(5,"hr"),P.Qb(6,"form",2),P.Xb("ngSubmit",function(){return e.onEdit()}),P.Qb(7,"div",3),P.Qb(8,"label",4),P.kc(9,"Title"),P.Pb(),P.Mb(10,"input",5),P.Qb(11,"small",6),P.kc(12),P.Pb(),P.Pb(),P.Qb(13,"div",3),P.Qb(14,"label",7),P.kc(15,"Description"),P.Pb(),P.Mb(16,"input",8),P.Qb(17,"small",6),P.kc(18),P.Pb(),P.Pb(),P.Qb(19,"button",9),P.kc(20,"Update"),P.Pb(),P.Pb()),2&t&&(P.Bb(3),P.cc("routerLink",P.dc(4,v)),P.Bb(3),P.cc("formGroup",e.editForm),P.Bb(6),P.lc(e.getValidationError("title")),P.Bb(6),P.lc(e.getValidationError("description")))},directives:[r.h,o.m,o.h,o.e,o.a,o.g,o.c],styles:[""]}),t})();function y(t,e){if(1&t){const t=P.Rb();P.Qb(0,"button",10),P.Xb("click",function(){P.gc(t);const e=P.Zb().$implicit;return P.Zb(2).deletePost(e.id)}),P.kc(1,"Delete"),P.Pb()}}const S=function(t){return["edit_post",t]};function w(t,e){if(1&t&&(P.Qb(0,"tr"),P.Qb(1,"td"),P.kc(2),P.Pb(),P.Qb(3,"td"),P.kc(4),P.Pb(),P.Qb(5,"td"),P.kc(6),P.Pb(),P.Qb(7,"td"),P.Qb(8,"a",8),P.kc(9,"Update"),P.Pb(),P.Pb(),P.Qb(10,"td"),P.jc(11,y,2,0,"button",9),P.Pb(),P.Pb()),2&t){const t=e.$implicit;P.Bb(2),P.mc(" ",t.id," "),P.Bb(2),P.mc(" ",t.title," "),P.Bb(2),P.mc(" ",t.description," "),P.Bb(2),P.cc("routerLink",P.ec(5,S,t.id)),P.Bb(3),P.cc("ngIf",t.id)}}function A(t,e){if(1&t&&(P.Qb(0,"tbody"),P.jc(1,w,12,7,"tr",7),P.Pb()),2&t){const t=e.ngIf;P.Bb(1),P.cc("ngForOf",t)}}const F=function(){return["/post/add_post"]};let L=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.posts=this.store.select(j),this.store.dispatch(h())}deletePost(t){confirm("Are you sure?")&&(console.log(t,"id"),this.store.dispatch(p({id:t})))}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(c.i))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-list"]],decls:24,vars:5,consts:[[1,"row","d-flex","flex-column-reverse","flex-md-row"],[1,"col-12","col-md-8","table-responsive"],[1,"display-5","fw-bold"],[1,"table","table-bordered","table-striped"],[4,"ngIf"],[1,"col-md-4"],["routerLinkActive","router-link-active",1,"btn","btn-primary","mt-3",3,"routerLink"],[4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"btn","btn-success",3,"routerLink"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(P.Qb(0,"div",0),P.Qb(1,"div",1),P.Qb(2,"div"),P.Qb(3,"h1",2),P.kc(4,"All Posts"),P.Pb(),P.Qb(5,"table",3),P.Qb(6,"thead"),P.Qb(7,"tr"),P.Qb(8,"th"),P.kc(9,"ID"),P.Pb(),P.Qb(10,"th"),P.kc(11,"Title"),P.Pb(),P.Qb(12,"th"),P.kc(13,"Description"),P.Pb(),P.Qb(14,"th"),P.kc(15,"Edit Action"),P.Pb(),P.Qb(16,"th"),P.kc(17,"Delete Action"),P.Pb(),P.Pb(),P.Pb(),P.jc(18,A,2,1,"tbody",4),P.ac(19,"async"),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"div",5),P.Mb(21,"router-outlet"),P.Pb(),P.Pb(),P.Qb(22,"a",6),P.kc(23,"Add Post"),P.Pb()),2&t&&(P.Bb(18),P.cc("ngIf",P.bc(19,2,e.posts)),P.Bb(4),P.cc("routerLink",P.dc(4,F)))},directives:[s.j,r.j,r.h,r.g,s.i],pipes:[s.b],styles:[""]}),t})();var E=i("5+tZ"),B=i("lJxs"),D=i("tk/3");let I=(()=>{class t{constructor(t){this.http=t,this.url="https://angular-auth5217-default-rtdb.asia-southeast1.firebasedatabase.app/posts.json"}getPostData(){return this.http.get(this.url).pipe(Object(B.a)(t=>{const e=[];for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(Object.assign(Object.assign({},t[i]),{id:i}));return e}))}addPost(t){return this.http.post(this.url,t)}editPost(t){const e={[String(t.id)]:{title:t.title,description:t.description}};return this.http.patch(this.url,e)}deletePost(t){return this.http.delete(`https://angular-auth5217-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${t}.json`)}}return t.\u0275fac=function(e){return new(e||t)(P.Ub(D.b))},t.\u0275prov=P.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T=(()=>{class t{constructor(t,e,i,s){this.actions$=t,this.http=e,this.postService=i,this.store=s,this.getPosts$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(h),Object(E.a)(t=>this.postService.getPostData().pipe(Object(B.a)(t=>m({posts:t})))))),this.addPost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(b),Object(E.a)(t=>this.postService.addPost(t.post).pipe(Object(B.a)(e=>(console.log(t),d({post:{title:t.post.title,description:t.post.description,id:e.name}}))))))),this.editPost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a),Object(E.a)(t=>this.postService.editPost(t.post).pipe(Object(B.a)(e=>l({post:t.post})))))),this.deletePost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(p),Object(E.a)(t=>this.postService.deletePost(t.id).pipe(Object(B.a)(t=>u())))))}}return t.\u0275fac=function(e){return new(e||t)(P.Ub(n.a),P.Ub(D.b),P.Ub(I),P.Ub(c.i))},t.\u0275prov=P.Hb({token:t,factory:t.\u0275fac}),t})();const _=Object(c.q)({posts:[]},Object(c.t)(d,(t,e)=>{let i=Object.assign({},e.post);return Object.assign(Object.assign({},t),{posts:[...t.posts,i]})}),Object(c.t)(l,(t,e)=>{const i=t.posts.map(t=>t.id===e.post.id?e.post:t);return Object.assign(Object.assign({},t),{posts:i})}),Object(c.t)(p,(t,e)=>{const i=t.posts.filter(t=>t.id!==e.id);return Object.assign(Object.assign({},t),{posts:i})}),Object(c.t)(m,(t,e)=>Object.assign(Object.assign({},t),{posts:e.posts})));function G(t,e){return _(t,e)}const x=[{path:"",component:L,children:[{path:"add_post",component:O},{path:"edit_post/:id",component:Q}]}];let $=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.Jb({type:t}),t.\u0275inj=P.Ib({imports:[[s.c,o.f,o.k,n.b.forFeature([T]),c.k.forFeature("posts",G),r.i.forChild(x)]]}),t})()}}]);