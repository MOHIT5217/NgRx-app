(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WuFp:function(t,e,s){"use strict";s.r(e),s.d(e,"PostModule",function(){return B});var i=s("ofXK"),o=s("3Pt+"),r=s("tyNb"),n=s("9jGm"),c=s("l7P3");const b=Object(c.n)("[POST ADD PAGE] Add_Post",Object(c.s)()),d=Object(c.n)("[POST ADD PAGE] Add_Post_Success",Object(c.s)()),a=Object(c.n)("[POST EDIT PAGE ] Edit_Post",Object(c.s)()),l=Object(c.n)("[POST EDIT PAGE ] Edit_Post_Success",Object(c.s)()),p=Object(c.n)("[POST LIST PAGE] Delete_Post",Object(c.s)()),u=Object(c.n)("[POST LIST PAGE] Delete_Post_Success"),h=Object(c.n)("[POST PAGE] Get_posts"),m=Object(c.n)("[POST PAGE] Get_posts_Success",Object(c.s)());var P=s("fXoL");let f=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.addPostForm=new o.d({title:new o.b(null,[o.l.required,o.l.minLength(5)]),description:new o.b(null,[o.l.required,o.l.minLength(10)])})}onSubmit(){this.addPostForm.valid?this.store.dispatch(b({post:{title:this.addPostForm.value.title,description:this.addPostForm.value.description}})):this.addPostForm.markAllAsTouched()}getValidationError(t){const e=this.addPostForm.get(t);if(e.touched&&e.invalid&&e.errors){if(e.errors.required)return`${t} is required`;if(e.errors.minlength)return"Should have a minimum length of "+("title"===t?"5":"10")}return null}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(c.h))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-add"]],decls:17,vars:3,consts:[[3,"formGroup","ngSubmit"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title","id","title",1,"form-control"],[1,"text-danger"],["for","description",1,"form-label"],["type","text","name","description","formControlName","description","id","description",1,"form-control"],["type","submit",1,"btn","btn-primary","my-4"]],template:function(t,e){1&t&&(P.Qb(0,"h1"),P.kc(1,"Add Post"),P.Pb(),P.Qb(2,"form",0),P.Xb("ngSubmit",function(){return e.onSubmit()}),P.Qb(3,"div"),P.Qb(4,"label",1),P.kc(5,"Title"),P.Pb(),P.Mb(6,"input",2),P.Qb(7,"small",3),P.kc(8),P.Pb(),P.Pb(),P.Qb(9,"div"),P.Qb(10,"label",4),P.kc(11,"Description"),P.Pb(),P.Mb(12,"input",5),P.Qb(13,"small",3),P.kc(14),P.Pb(),P.Pb(),P.Qb(15,"button",6),P.kc(16,"Add Post"),P.Pb(),P.Pb()),2&t&&(P.Bb(2),P.cc("formGroup",e.addPostForm),P.Bb(6),P.lc(e.getValidationError("title")),P.Bb(6),P.lc(e.getValidationError("description")))},directives:[o.m,o.h,o.e,o.a,o.g,o.c],styles:[""]}),t})();const O=Object(c.o)("posts"),g=Object(c.q)(O,t=>t.posts),j=Object(c.q)(O,(t,e)=>t.posts.find(t=>t.id===e.postId));let v=(()=>{class t{constructor(t,e,s){this.activatedroute=t,this.store=e,this.router=s}ngOnInit(){this.activatedroute.params.subscribe(t=>{console.log(t.id),this.postSubscription=this.store.select(j,{postId:t.id}).subscribe(t=>{t&&(this.post=t),this.editForm=new o.d({title:new o.b(null==t?void 0:t.title,[o.l.required,o.l.minLength(5)]),description:new o.b(null==t?void 0:t.description,[o.l.required,o.l.minLength(10)])})})})}onEdit(){this.editForm.valid?(this.store.dispatch(a({post:{title:this.editForm.value.title,description:this.editForm.value.description,id:this.post.id}})),this.router.navigateByUrl("/post")):this.editForm.markAllAsTouched()}getValidationError(t){const e=this.editForm.get(t);if(e.touched&&e.invalid&&e.errors){if(e.errors.required)return`${t} is required`;if(e.errors.minlength)return"Should have a minimum length of "+("title"===t?"5":"10")}return null}ngOnDestroy(){this.postSubscription&&(console.log("ngOnDestroy"),this.postSubscription.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(r.a),P.Lb(c.h),P.Lb(r.b))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-edit"]],decls:17,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","",1,"form-label"],["type","text","name","title","formControlName","title","id","title",1,"form-control"],[1,"text-danger"],["for","description",1,"form-label"],["type","text","name","description","formControlName","description","id","description",1,"form-control"],[1,"btn","btn-primary","my-4"]],template:function(t,e){1&t&&(P.Qb(0,"h1"),P.kc(1,"Update Form"),P.Pb(),P.Qb(2,"form",0),P.Xb("ngSubmit",function(){return e.onEdit()}),P.Qb(3,"div",1),P.Qb(4,"label",2),P.kc(5,"Title"),P.Pb(),P.Mb(6,"input",3),P.Qb(7,"small",4),P.kc(8),P.Pb(),P.Pb(),P.Qb(9,"div",1),P.Qb(10,"label",5),P.kc(11,"Description"),P.Pb(),P.Mb(12,"input",6),P.Qb(13,"small",4),P.kc(14),P.Pb(),P.Pb(),P.Qb(15,"button",7),P.kc(16,"Update"),P.Pb(),P.Pb()),2&t&&(P.Bb(2),P.cc("formGroup",e.editForm),P.Bb(6),P.lc(e.getValidationError("title")),P.Bb(6),P.lc(e.getValidationError("description")))},directives:[o.m,o.h,o.e,o.a,o.g,o.c],styles:[""]}),t})();function k(t,e){if(1&t){const t=P.Rb();P.Qb(0,"button",9),P.Xb("click",function(){P.gc(t);const e=P.Zb().$implicit;return P.Zb(2).deletePost(e.id)}),P.kc(1,"Delete"),P.Pb()}}const Q=function(t){return["edit_post",t]};function S(t,e){if(1&t&&(P.Qb(0,"tr"),P.Qb(1,"td"),P.kc(2),P.Pb(),P.Qb(3,"td"),P.kc(4),P.Pb(),P.Qb(5,"td"),P.kc(6),P.Pb(),P.Qb(7,"td"),P.Qb(8,"a",7),P.kc(9,"Update"),P.Pb(),P.Pb(),P.Qb(10,"td"),P.jc(11,k,2,0,"button",8),P.Pb(),P.Pb()),2&t){const t=e.$implicit;P.Bb(2),P.mc(" ",t.id," "),P.Bb(2),P.mc(" ",t.title," "),P.Bb(2),P.mc(" ",t.description," "),P.Bb(2),P.cc("routerLink",P.ec(5,Q,t.id)),P.Bb(3),P.cc("ngIf",t.id)}}function y(t,e){if(1&t&&(P.Qb(0,"tbody"),P.jc(1,S,12,7,"tr",6),P.Pb()),2&t){const t=e.ngIf;P.Bb(1),P.cc("ngForOf",t)}}const A=function(){return["/post/add_post"]};let F=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.posts=this.store.select(g),this.store.dispatch(h())}deletePost(t){confirm("Are you sure?")&&(console.log(t,"id"),this.store.dispatch(p({id:t})))}}return t.\u0275fac=function(e){return new(e||t)(P.Lb(c.h))},t.\u0275cmp=P.Fb({type:t,selectors:[["app-post-list"]],decls:21,vars:5,consts:[["routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],[1,"row"],[1,"col-md-8"],[1,"table","table-striped"],[4,"ngIf"],[1,"col-md-4"],[4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"btn","btn-success",3,"routerLink"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(P.Qb(0,"a",0),P.kc(1,"Add Post"),P.Pb(),P.Qb(2,"div",1),P.Qb(3,"div",2),P.Qb(4,"table",3),P.Qb(5,"thead"),P.Qb(6,"tr"),P.Qb(7,"th"),P.kc(8,"ID"),P.Pb(),P.Qb(9,"th"),P.kc(10,"Title"),P.Pb(),P.Qb(11,"th"),P.kc(12,"Description"),P.Pb(),P.Qb(13,"th"),P.kc(14,"Edit Action"),P.Pb(),P.Qb(15,"th"),P.kc(16,"Delete Action"),P.Pb(),P.Pb(),P.Pb(),P.jc(17,y,2,1,"tbody",4),P.ac(18,"async"),P.Pb(),P.Pb(),P.Qb(19,"div",5),P.Mb(20,"router-outlet"),P.Pb(),P.Pb()),2&t&&(P.cc("routerLink",P.dc(4,A)),P.Bb(17),P.cc("ngIf",P.bc(18,2,e.posts)))},directives:[r.d,r.c,i.j,r.f,i.i],pipes:[i.b],styles:[""]}),t})();var E=s("5+tZ"),w=s("lJxs"),D=s("tk/3");let L=(()=>{class t{constructor(t){this.http=t,this.url="https://angular-auth5217-default-rtdb.asia-southeast1.firebasedatabase.app/posts.json"}getPostData(){return this.http.get(this.url).pipe(Object(w.a)(t=>{const e=[];for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.push(Object.assign(Object.assign({},t[s]),{id:s}));return e}))}addPost(t){return this.http.post(this.url,t)}editPost(t){const e={[String(t.id)]:{title:t.title,description:t.description}};return this.http.patch(this.url,e)}deletePost(t){return this.http.delete(`https://angular-auth5217-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${t}.json`)}}return t.\u0275fac=function(e){return new(e||t)(P.Ub(D.b))},t.\u0275prov=P.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),I=(()=>{class t{constructor(t,e,s,i){this.actions$=t,this.http=e,this.postService=s,this.store=i,this.getPosts$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(h),Object(E.a)(t=>this.postService.getPostData().pipe(Object(w.a)(t=>m({posts:t})))))),this.addPost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(b),Object(E.a)(t=>this.postService.addPost(t.post).pipe(Object(w.a)(e=>(console.log(t),d({post:{title:t.post.title,description:t.post.description,id:e.name}}))))))),this.editPost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a),Object(E.a)(t=>this.postService.editPost(t.post).pipe(Object(w.a)(e=>l({post:t.post})))))),this.deletePost$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(p),Object(E.a)(t=>this.postService.deletePost(t.id).pipe(Object(w.a)(t=>u())))))}}return t.\u0275fac=function(e){return new(e||t)(P.Ub(n.a),P.Ub(D.b),P.Ub(L),P.Ub(c.h))},t.\u0275prov=P.Hb({token:t,factory:t.\u0275fac}),t})();const T=Object(c.p)({posts:[]},Object(c.r)(d,(t,e)=>{let s=Object.assign({},e.post);return Object.assign(Object.assign({},t),{posts:[...t.posts,s]})}),Object(c.r)(l,(t,e)=>{const s=t.posts.map(t=>t.id===e.post.id?e.post:t);return Object.assign(Object.assign({},t),{posts:s})}),Object(c.r)(p,(t,e)=>{const s=t.posts.filter(t=>t.id!==e.id);return Object.assign(Object.assign({},t),{posts:s})}),Object(c.r)(m,(t,e)=>Object.assign(Object.assign({},t),{posts:e.posts})));function _(t,e){return T(t,e)}const G=[{path:"",component:F,children:[{path:"add_post",component:f},{path:"edit_post/:id",component:v}]}];let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.Jb({type:t}),t.\u0275inj=P.Ib({imports:[[i.c,o.f,o.k,n.b.forFeature([I]),c.j.forFeature("posts",_),r.e.forChild(G)]]}),t})()}}]);